# Epic: Enhance Travel Itinerary Readability and Information Density

This epic focuses on improving the user interface of the generated travel itinerary to make it more scannable, useful, and transparent for the Travel Coordinator.

---

## Feature: Improve Report Scannability

### Story 1.1: Collapse Verification Report by Default

#### 1. User Story Details
- **As a** Travel Coordinator
- **I want** the Verification Report section to be collapsed by default
- **So that** I can focus on the primary itinerary details first and reduce initial visual clutter.

#### 2. Acceptance Criteria
- **Given** a travel itinerary has been successfully generated and displayed
- **When** the UI first loads the itinerary
- **Then** the "Verification" section content is hidden.
- **And** there is a visible control (e.g., a "Show/Hide" button or a clickable header) to expand the section.
- **Given** the "Verification" section is collapsed
- **When** I click the control to expand it
- **Then** the full verification report becomes visible.
- **And** the control updates to indicate it can be collapsed again.

#### 3. Story Specifications
- **Story Points/Effort**: 1
- **Priority**: High
- **Dependencies**: None
- **Definition of Done**: The verification report is collapsed by default on all generated itineraries and can be toggled open and closed by the user.

#### 4. Additional Details
- **UX/UI Requirements**: The collapsed state should be visually clear. The control to expand/collapse should be intuitive (e.g., using a `+`/`-` icon or a chevron). The interaction should be smooth (e.g., no page reload).
- **Technical Notes**: This can be implemented with a small amount of JavaScript and CSS to toggle a class that controls the visibility of the verification content.

---

### Story 1.2: Collapse Contact Information by Default

#### 1. User Story Details
- **As a** Travel Coordinator
- **I want** the Contact Information section to be collapsed by default
- **So that** the main itinerary is more scannable and I can expand the contacts only when needed.

#### 2. Acceptance Criteria
- **Given** a travel itinerary has been successfully generated and displayed
- **When** the UI first loads the itinerary
- **Then** the "Contact Information" section content is hidden.
- **And** there is a visible control to expand the section.
- **Given** the "Contact Information" section is collapsed
- **When** I click the control to expand it
- **Then** the full list of contacts becomes visible.
- **And** the control updates to indicate it can be collapsed again.

#### 3. Story Specifications
- **Story Points/Effort**: 1
- **Priority**: High
- **Dependencies**: Depends on Story 2.1 (Display a Complete List of Contacts).
- **Definition of Done**: The contact information section is collapsed by default and can be toggled open and closed by the user.

#### 4. Additional Details
- **UX/UI Requirements**: Similar to the verification report, the control should be intuitive. The section should be clearly labeled even in its collapsed state.
- **Technical Notes**: This will likely involve changes to the `renderTopContactsSection` function in `api/travelService/service.js` to wrap the output in a collapsible container.

---

## Feature: Enhance Data Presentation

### Story 2.1: Display a Complete List of Contacts

#### 1. User Story Details
- **As a** Travel Coordinator
- **I want** to see a complete list of all contacts from the travel plan, not just the top three
- **So that** I have all necessary contact information readily available without needing to consult the raw data.

#### 2. Acceptance Criteria
- **Given** the API response contains a `top_contacts_vcards` array with more than 3 contacts
- **When** the itinerary is rendered in the UI
- **Then** all contacts from the `top_contacts_vcards` array are displayed in the "Contact Information" section.
- **Given** the API response contains a `top_contacts_vcards` array
- **When** the itinerary is rendered
- **Then** the section header is "Contact Information" (or similar), not "Top 3 Contacts".

#### 3. Story Specifications
- **Story Points/Effort**: 2
- **Priority**: High
- **Dependencies**: None
- **Definition of Done**: The API service logic is updated to process and render all contacts from the `top_contacts_vcards` field. The UI correctly displays the full list.

#### 4. Additional Details
- **Business Rules**: The requirement to limit to "top 3" is officially removed. All provided contacts should be shown.
- **Technical Notes**: The `api/travelService/service.js` file, specifically the `renderTopContactsSection` function, will need to be reviewed to ensure it iterates over the entire `top_contacts_vcards` array. The `travel-schema.json` currently uses `top_contacts_vcards`; this should be renamed to `contacts_vcards` or similar to reflect the change, which will also require updating the `travel.js` API endpoint.

---

### Story 2.2: Display Data Sources

#### 1. User Story Details
- **As a** Travel Coordinator
- **I want** to see a formatted list of the data sources used to generate the itinerary
- **So that** I can understand where the information originated from for verification and trust.

#### 2. Acceptance Criteria
- **Given** the API response contains a `meta.sources` array with one or more URLs
- **When** the itinerary is rendered in the UI
- **Then** a new section titled "Data Sources" is displayed.
- **And** each source URL from the `meta.sources` array is displayed as a clickable link within this new section.
- **Given** the `meta.sources` array is empty or not present
- **When** the itinerary is rendered
- **Then** the "Data Sources" section is not displayed.

#### 3. Story Specifications
- **Story Points/Effort**: 2
- **Priority**: Medium
- **Dependencies**: None
- **Definition of Done**: A new "Data Sources" section is added to the HTML output, which correctly formats and displays the source URLs from the API response.

#### 4. Additional Details
- **UX/UI Requirements**: The "Data Sources" section should be clearly separated from other content. It could be placed at the very end of the report. The links should open in a new tab.
- **Technical Notes**: This requires creating a new rendering function in `api/travelService/service.js` (e.g., `renderSourcesSection`) and calling it within the main `parseResponse` function. The output should be appended to the final HTML.
